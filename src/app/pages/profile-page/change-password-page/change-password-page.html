<div class="main">
  <h1>Perfil</h1>

  <div class="container">
    @if (messageDisplayed.message.length > 0) {
      <stk-message-notification
        [message]="messageDisplayed.message"
        [status]="messageDisplayed.status"
      />
    }
    <div class="container__back">
      <stk-button-back path="/profile" />
    </div>
    <div class="container__title">
      <h2>Alterar senha</h2>
      <p>Crie uma senha nova com pelo menos 8 caracteres.</p>
    </div>
    <form class="container__form" [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
      <stk-password-input
        id="currentPassword"
        label="Digite a sua senha atual *"
        [control]="passwordForm.get('currentPassword')"
        [errorMessages]="{
          required: 'Campo obrigatório',
          minlength: 'Senha inválida',
          maxlength: 'Senha inválida',
        }"
      />
      <stk-password-input
        id="newPassword"
        label="Digite sua senha nova *"
        [control]="passwordForm.get('newPassword')"
        [errorMessages]="{
          required: 'Campo obrigatório',
          minlength: 'Senha muito curta',
          maxlength: 'Senha muito longa',
        }"
      />
      <stk-password-input
        id="confirmPassword"
        label="Confirme sua senha *"
        [control]="passwordForm.get('confirmPassword')"
        [parentForm]="passwordForm"
        [formLevelErrors]="['passwordsNotMatching']"
        [errorMessages]="{
          required: 'Campo obrigatório',
          passwordsNotMatching: 'As senhas não coincidem',
        }"
      />

      <app-button
        [disabled]="passwordForm.invalid || isLoading"
        [type]="'submit'"
        [loading]="isLoading"
      >
        Alterar</app-button
      >
    </form>
  </div>
</div>
