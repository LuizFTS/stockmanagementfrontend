<div class="main">
  <h1>Perfil</h1>

  <stk-card [padding]="2">
    <div class="container">
      @if (messageDisplayed.message.length > 0) {
        <stk-message-notification
          [message]="messageDisplayed.message"
          [status]="messageDisplayed.status"
        />
      }
      <stk-back-button path="/profile" />
      <div class="container__title">
        <h2>Alterar senha</h2>
        <p>Crie uma senha nova com pelo menos 8 caracteres.</p>
      </div>
      <form class="container__form" [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
        <stk-password-input
          id="currentPassword"
          label="Digite a sua senha atual *"
          [control]="passwordForm.get('currentPassword')"
          [errorMessages]="{
            required: 'Senha é obrigatória',
            minlength: 'Senha inválida',
            maxlength: 'Senha inválida',
          }"
        />
        <stk-password-input
          id="newPassword"
          label="Digite sua senha nova *"
          [control]="passwordForm.get('newPassword')"
          [errorMessages]="{
            required: 'Senha é obrigatória',
            minlength: 'Senha muito curta',
            maxlength: 'Senha muito longa',
          }"
        />
        <stk-password-input
          id="confirmPassword"
          label="Confirme sua senha *"
          [control]="passwordForm.get('confirmPassword')"
          [parentForm]="passwordForm"
          [formLevelErrors]="['passwordsNotMatching']"
          [errorMessages]="{
            required: 'Confirmação da senha é obrigatória',
            passwordsNotMatching: 'As senhas não coincidem',
          }"
        />

        <stk-button
          [disabled]="passwordForm.invalid || isLoading"
          [type]="'submit'"
          [loading]="isLoading"
        >
          Alterar</stk-button
        >
      </form>
    </div>
  </stk-card>
</div>
