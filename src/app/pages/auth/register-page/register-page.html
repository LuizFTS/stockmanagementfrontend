<div class="register_page">
  <div class="register_page__container">
    <stk-back-button path="/login" />
    <h2>Crie uma nova conta</h2>

    @if (messageDisplayed.message.length > 0) {
      <stk-message-notification
        [message]="messageDisplayed.message"
        [status]="messageDisplayed.status"
      />
    }

    <form
      class="register_page__container__form"
      [formGroup]="newUserForm"
      (ngSubmit)="registerHandle()"
    >
      <stk-text-input
        label="Nome *"
        type="text"
        id="firstName"
        [control]="newUserForm.get('firstName')"
        [errorMessages]="{
          required: 'Nome é obrigatório',
          minlength: 'Nome deve ter pelo menos 2 caracteres',
        }"
      />
      <stk-text-input
        label="Sobrenome *"
        type="text"
        id="lastName"
        [control]="newUserForm.get('lastName')"
        [errorMessages]="{
          required: 'Sobrenome é obrigatório',
          minlength: 'Sobrenome deve ter pelo menos 2 caracteres',
        }"
      />
      <stk-text-input
        label="E-mail *"
        type="email"
        id="email"
        [control]="newUserForm.get('email')"
        [errorMessages]="{
          required: 'E-mail é obrigatório',
          email: 'E-mail inválido',
        }"
      />

      <stk-password-input
        label="Digite a sua senha *"
        id="password"
        [control]="newUserForm.get('password')"
        [errorMessages]="{
          required: 'Senha é obrigatória',
          minlength: 'A senha deve ter pelo menos 8 caracteres',
        }"
      />
      <stk-password-input
        label="Digite a sua senha *"
        id="confirmPassword"
        [control]="newUserForm.get('confirmPassword')"
        [parentForm]="newUserForm"
        [formLevelErrors]="['passwordsNotMatching']"
        [errorMessages]="{
          required: 'Confirmação da senha é obrigatória',
          passwordsNotMatching: 'As senhas não coincidem',
        }"
      />
      <stk-button
        class="register_page__container__form__btn"
        [disabled]="newUserForm.invalid || isLoading"
        type="submit"
        [loading]="isLoading"
        >Cadastrar</stk-button
      >
    </form>
  </div>
</div>
